<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Translation System Testing & Validation</title>
  <link rel="stylesheet" href="Cacti-Github.css" />
  <style>
    .test-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .test-header {
      background: linear-gradient(135deg, #6f42c1 0%, #5a32a3 100%);
      color: white;
      padding: 30px;
      border-radius: 10px;
      margin-bottom: 30px;
      text-align: center;
    }
    
    .test-section {
      background: white;
      border: 2px solid #e9ecef;
      border-radius: 10px;
      margin: 20px 0;
      overflow: hidden;
    }
    
    .test-section-header {
      background: #f8f9fa;
      padding: 15px 20px;
      border-bottom: 1px solid #e9ecef;
      font-weight: bold;
      color: #495057;
    }
    
    .test-section-content {
      padding: 20px;
    }
    
    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .test-item {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #007cba;
    }
    
    .test-item h4 {
      margin-top: 0;
      color: #007cba;
    }
    
    .status-indicator {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 8px;
    }
    
    .status-pass { background: #28a745; }
    .status-fail { background: #dc3545; }
    .status-warn { background: #ffc107; }
    .status-info { background: #17a2b8; }
    
    .test-results {
      background: #e3f2fd;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
    }
    
    .test-button {
      background: #007cba;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
      transition: background 0.3s ease;
    }
    
    .test-button:hover {
      background: #005a87;
    }
    
    .test-button:disabled {
      background: #6c757d;
      cursor: not-allowed;
    }
    
    .log-output {
      background: #2d3748;
      color: #e2e8f0;
      padding: 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      max-height: 300px;
      overflow-y: auto;
      margin: 15px 0;
    }
    
    .metric-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      text-align: center;
    }
    
    .metric-value {
      font-size: 2em;
      font-weight: bold;
      color: #007cba;
      display: block;
    }
    
    .metric-label {
      color: #6c757d;
      font-size: 0.9em;
      margin-top: 5px;
    }
    
    .progress-bar {
      width: 100%;
      height: 20px;
      background: #e9ecef;
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #007cba 0%, #28a745 100%);
      transition: width 0.3s ease;
    }
  </style>
</head>
<body>

<div class="test-container">
  <!-- Header -->
  <div class="test-header">
    <h1>üß™ Translation System Testing & Validation</h1>
    <p>Comprehensive testing suite for the Cacti multilingual documentation system</p>
  </div>

  <!-- System Status -->
  <div class="test-section">
    <div class="test-section-header">üìä System Status Overview</div>
    <div class="test-section-content">
      <div class="test-grid">
        <div class="metric-card">
          <span class="metric-value" id="system-status">Checking...</span>
          <div class="metric-label">System Status</div>
        </div>
        <div class="metric-card">
          <span class="metric-value" id="current-lang">Loading...</span>
          <div class="metric-label">Current Language</div>
        </div>
        <div class="metric-card">
          <span class="metric-value" id="translator-version">Detecting...</span>
          <div class="metric-label">Translator Version</div>
        </div>
        <div class="metric-card">
          <span class="metric-value" id="browser-support">Testing...</span>
          <div class="metric-label">Browser Support</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Functional Tests -->
  <div class="test-section">
    <div class="test-section-header">‚ö° Functional Tests</div>
    <div class="test-section-content">
      <div class="test-grid">
        <div class="test-item">
          <h4><span class="status-indicator" id="test-1-status"></span>Language Selector</h4>
          <p>Tests if language selector is present and functional</p>
          <button class="test-button" onclick="runTest('languageSelector')">Run Test</button>
        </div>
        
        <div class="test-item">
          <h4><span class="status-indicator" id="test-2-status"></span>Translation Function</h4>
          <p>Tests if translation functions are available and working</p>
          <button class="test-button" onclick="runTest('translationFunction')">Run Test</button>
        </div>
        
        <div class="test-item">
          <h4><span class="status-indicator" id="test-3-status"></span>Language Persistence</h4>
          <p>Tests if language selection persists across page reloads</p>
          <button class="test-button" onclick="runTest('languagePersistence')">Run Test</button>
        </div>
        
        <div class="test-item">
          <h4><span class="status-indicator" id="test-4-status"></span>Content Translation</h4>
          <p>Tests actual content translation accuracy</p>
          <button class="test-button" onclick="runTest('contentTranslation')">Run Test</button>
        </div>
        
        <div class="test-item">
          <h4><span class="status-indicator" id="test-5-status"></span>Performance</h4>
          <p>Tests translation speed and performance metrics</p>
          <button class="test-button" onclick="runTest('performance')">Run Test</button>
        </div>
        
        <div class="test-item">
          <h4><span class="status-indicator" id="test-6-status"></span>Accessibility</h4>
          <p>Tests accessibility features and ARIA compliance</p>
          <button class="test-button" onclick="runTest('accessibility')">Run Test</button>
        </div>
      </div>
      
      <div style="text-align: center; margin: 20px 0;">
        <button class="test-button" onclick="runAllTests()" style="background: #28a745; font-size: 1.1em; padding: 15px 30px;">
          üöÄ Run All Tests
        </button>
      </div>
    </div>
  </div>

  <!-- Test Results -->
  <div class="test-section">
    <div class="test-section-header">üìã Test Results</div>
    <div class="test-section-content">
      <div class="test-results">
        <h4>Overall Progress</h4>
        <div class="progress-bar">
          <div class="progress-fill" id="overall-progress" style="width: 0%"></div>
        </div>
        <div id="progress-text">0% Complete</div>
      </div>
      
      <div class="log-output" id="test-log">
        <div>üîß Translation System Testing Console</div>
        <div>Ready to run tests...</div>
      </div>
    </div>
  </div>

  <!-- Translation Samples -->
  <div class="test-section">
    <div class="test-section-header">üåç Translation Samples</div>
    <div class="test-section-content">
      <p>The following content will be used to test translation accuracy:</p>
      
      <div class="test-grid">
        <div class="test-item">
          <h4>System Terms</h4>
          <p>Requirements, Installation, Configuration, Settings, Templates, Devices, Graphs, Data Sources</p>
        </div>
        
        <div class="test-item">
          <h4>Cacti Specific</h4>
          <p>RRDtool, SNMP, Poller, Spine, Data Query, Graph Template, Device Template, Threshold</p>
        </div>
        
        <div class="test-item">
          <h4>Actions</h4>
          <p>Add, Edit, Delete, Save, Cancel, Create, Update, Configure, Enable, Disable</p>
        </div>
        
        <div class="test-item">
          <h4>Status</h4>
          <p>Active, Inactive, Online, Offline, Running, Stopped, Connected, Disconnected</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Manual Tests -->
  <div class="test-section">
    <div class="test-section-header">üéØ Manual Testing</div>
    <div class="test-section-content">
      <h4>Manual Test Procedures:</h4>
      <ol>
        <li><strong>Language Switching:</strong> Use the language selector to switch between all three languages</li>
        <li><strong>Cross-page Navigation:</strong> Navigate to different pages and verify language persistence</li>
        <li><strong>Mobile Testing:</strong> Test on mobile devices and different screen sizes</li>
        <li><strong>Browser Compatibility:</strong> Test on Chrome, Firefox, Safari, and Edge</li>
        <li><strong>Performance:</strong> Monitor translation speed and responsiveness</li>
        <li><strong>Accessibility:</strong> Test with keyboard navigation and screen readers</li>
      </ol>
      
      <div style="margin: 20px 0;">
        <button class="test-button" onclick="testLanguageSwitch('zh-cn')">Test Chinese (Simplified)</button>
        <button class="test-button" onclick="testLanguageSwitch('zh-tw')">Test Chinese (Traditional)</button>
        <button class="test-button" onclick="testLanguageSwitch('en')">Test English</button>
      </div>
    </div>
  </div>

</div>

<hr />
<p style="text-align: center;">Copyright (c) 2004-2024 The Cacti Group</p>

<!-- ================================================================ -->
<!-- Cacti Documentation Multilingual Translation System v2.0       -->
<!-- Supports: English, Simplified Chinese, Traditional Chinese     -->
<!-- Features: Real-time translation, Persistent selection,         -->
<!--           Responsive UI, 300+ technical terms, Accessibility   -->
<!-- ================================================================ -->
<script type="text/javascript" src="js/universal-translator.js"></script>
<script type="text/javascript" src="js/auto-translator.js"></script>

<script type="text/javascript">
// Testing framework
class TranslationTester {
    constructor() {
        this.tests = {};
        this.results = {};
        this.totalTests = 6;
        this.completedTests = 0;
    }

    log(message, type = 'info') {
        const logElement = document.getElementById('test-log');
        const timestamp = new Date().toLocaleTimeString();
        const colors = {
            'info': '#e2e8f0',
            'success': '#68d391',
            'error': '#fc8181',
            'warning': '#f6e05e'
        };
        
        const logEntry = document.createElement('div');
        logEntry.style.color = colors[type] || colors.info;
        logEntry.textContent = `[${timestamp}] ${message}`;
        logElement.appendChild(logEntry);
        logElement.scrollTop = logElement.scrollHeight;
        
        console.log(`[TranslationTester] ${message}`);
    }

    updateStatus(testId, status) {
        const statusElement = document.getElementById(`test-${testId}-status`);
        if (statusElement) {
            statusElement.className = `status-indicator status-${status}`;
        }
    }

    updateProgress() {
        const progress = (this.completedTests / this.totalTests) * 100;
        const progressBar = document.getElementById('overall-progress');
        const progressText = document.getElementById('progress-text');
        
        if (progressBar) progressBar.style.width = `${progress}%`;
        if (progressText) progressText.textContent = `${Math.round(progress)}% Complete`;
    }

    async runTest(testName) {
        this.log(`Starting test: ${testName}`, 'info');
        
        try {
            const result = await this.tests[testName]();
            this.results[testName] = result;
            this.completedTests++;
            this.updateProgress();
            
            if (result.passed) {
                this.log(`‚úÖ Test ${testName} PASSED: ${result.message}`, 'success');
                this.updateStatus(result.testId, 'pass');
            } else {
                this.log(`‚ùå Test ${testName} FAILED: ${result.message}`, 'error');
                this.updateStatus(result.testId, 'fail');
            }
        } catch (error) {
            this.log(`üí• Test ${testName} ERROR: ${error.message}`, 'error');
            this.updateStatus(this.getTestId(testName), 'fail');
        }
    }

    getTestId(testName) {
        const testIds = {
            'languageSelector': 1,
            'translationFunction': 2,
            'languagePersistence': 3,
            'contentTranslation': 4,
            'performance': 5,
            'accessibility': 6
        };
        return testIds[testName] || 1;
    }

    // Test implementations
    async testLanguageSelector() {
        const selector = document.getElementById('translator-language-selector');
        const controls = document.getElementById('translator-controls');
        
        return {
            testId: 1,
            passed: !!(selector && controls),
            message: selector && controls ? 
                'Language selector and controls found' : 
                'Language selector or controls missing'
        };
    }

    async testTranslationFunction() {
        const hasChangeLanguage = typeof window.changeLanguage === 'function';
        const hasAutoTranslator = typeof window.autoTranslator === 'object';
        
        return {
            testId: 2,
            passed: hasChangeLanguage,
            message: hasChangeLanguage ? 
                `Translation functions available (AutoTranslator: ${hasAutoTranslator})` :
                'Translation functions not found'
        };
    }

    async testLanguagePersistence() {
        const originalLang = localStorage.getItem('selectedLanguage');
        localStorage.setItem('selectedLanguage', 'test-lang');
        const testLang = localStorage.getItem('selectedLanguage');
        
        // Restore original
        if (originalLang) {
            localStorage.setItem('selectedLanguage', originalLang);
        } else {
            localStorage.removeItem('selectedLanguage');
        }
        
        return {
            testId: 3,
            passed: testLang === 'test-lang',
            message: testLang === 'test-lang' ? 
                'Language persistence working' : 
                'Language persistence failed'
        };
    }

    async testContentTranslation() {
        if (typeof window.autoTranslator === 'object' && window.autoTranslator.translateText) {
            const testText = 'Requirements';
            const translated = window.autoTranslator.translateText(testText, 'zh-cn');
            
            return {
                testId: 4,
                passed: translated !== testText,
                message: translated !== testText ? 
                    `Translation working: "${testText}" ‚Üí "${translated}"` :
                    'Translation not working'
            };
        } else {
            return {
                testId: 4,
                passed: false,
                message: 'Auto-translator not available for testing'
            };
        }
    }

    async testPerformance() {
        const startTime = performance.now();
        
        // Simulate translation workload
        if (typeof window.changeLanguage === 'function') {
            window.changeLanguage('zh-cn');
            await new Promise(resolve => setTimeout(resolve, 100));
            window.changeLanguage('en');
        }
        
        const endTime = performance.now();
        const duration = endTime - startTime;
        
        return {
            testId: 5,
            passed: duration < 1000,
            message: `Translation completed in ${duration.toFixed(2)}ms`
        };
    }

    async testAccessibility() {
        const selector = document.getElementById('translator-language-selector');
        const backButton = document.getElementById('translator-back-button');
        
        const hasAriaLabels = selector && selector.hasAttribute('aria-label');
        const hasKeyboardSupport = true; // Assume keyboard support is implemented
        
        return {
            testId: 6,
            passed: hasAriaLabels && hasKeyboardSupport,
            message: hasAriaLabels ? 
                'Accessibility features detected' : 
                'Missing accessibility features'
        };
    }
}

// Initialize tester
const tester = new TranslationTester();

// Register tests
tester.tests = {
    'languageSelector': () => tester.testLanguageSelector(),
    'translationFunction': () => tester.testTranslationFunction(),
    'languagePersistence': () => tester.testLanguagePersistence(),
    'contentTranslation': () => tester.testContentTranslation(),
    'performance': () => tester.testPerformance(),
    'accessibility': () => tester.testAccessibility()
};

// Global functions
function runTest(testName) {
    tester.runTest(testName);
}

async function runAllTests() {
    tester.log('üöÄ Starting comprehensive test suite...', 'info');
    tester.completedTests = 0;
    
    for (const testName of Object.keys(tester.tests)) {
        await tester.runTest(testName);
        await new Promise(resolve => setTimeout(resolve, 500)); // Delay between tests
    }
    
    tester.log('üéâ All tests completed!', 'success');
}

function testLanguageSwitch(lang) {
    if (typeof window.changeLanguage === 'function') {
        tester.log(`üîÑ Manual language switch to: ${lang}`, 'info');
        window.changeLanguage(lang);
    } else {
        tester.log('‚ùå changeLanguage function not available', 'error');
    }
}

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    tester.log('üß™ Translation testing system initialized', 'info');
    
    // Update system status
    setTimeout(() => {
        document.getElementById('system-status').textContent = 
            typeof window.changeLanguage === 'function' ? 'Active' : 'Inactive';
        
        document.getElementById('current-lang').textContent = 
            localStorage.getItem('selectedLanguage') || 'en';
        
        document.getElementById('translator-version').textContent = 
            window.universalTranslatorInitialized ? 'v2.0' : 'Unknown';
        
        document.getElementById('browser-support').textContent = 
            typeof localStorage !== 'undefined' ? 'Supported' : 'Limited';
    }, 1000);
});
</script>

</body>
</html>
